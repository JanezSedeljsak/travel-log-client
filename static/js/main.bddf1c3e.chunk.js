(this.webpackJsonpTravelLog=this.webpackJsonpTravelLog||[]).push([[0],{303:function(e,t,n){},304:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(28),c=n.n(a),s=n(180),i=n(172),o=n.n(i),u=n(78),l=n(89),j=n(34),b=n(9),p=n.n(b),d=n(23),O=n(16),h=n(90),m=n.n(h),f="https://travel-log.azurewebsites.net",x=function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,a,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,r=c.length>2&&void 0!==c[2]?c[2]:[],e.next=4,m()({method:"get",headers:Object(O.a)({"Access-Control-Allow-Origin":"*"},n?{Authorization:"Bearer ".concat(n)}:{}),url:"".concat(f,"/api/v1/").concat(t)});case 4:return a=e.sent,e.abrupt("return",200===a.status?a.data:r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function g(){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("stats/popular-destinations");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("stats/active-users");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("stats/top-countries");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("stats/avg-trips-month");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("trips");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("users");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("my-profile",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("trip-suggestion",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"post",headers:{"Access-Control-Allow-Origin":"*"},url:"".concat(f,"/api/v1/auth/login"),data:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"post",headers:{"Access-Control-Allow-Origin":"*"},url:"".concat(f,"/api/v1/auth/register"),data:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"put",headers:Object(O.a)({"Access-Control-Allow-Origin":"*"},n?{Authorization:"Bearer ".concat(n)}:{}),url:"".concat(f,"/api/v1/user/").concat(t.id),data:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"delete",headers:Object(O.a)({"Access-Control-Allow-Origin":"*"},n?{Authorization:"Bearer ".concat(n)}:{}),url:"".concat(f,"/api/v1/trips/").concat(t)});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G="redux/users/SET_USER",V="redux/users/LOG_OUT",J="redux/users/SIGN_IN",W="redux/users/REGISTER",H="redux/users/PROFILE_UPDATE",X="redux/users/PROFILE_UPDATE_COMPLETE",K="redux/users/PROFILE_UPDATE_ERROR",Z="redux/users/REGISTER_COMPLETE",$="redux/users/SET_LOGIN_ERROR",Q="redux/users/SET_REGISTER_ERROR",ee={email:null,isLoggedIn:!1,isFetching:!1,jwt:null,userId:null,isAdmin:!1,loginError:null,registerError:null,profileUpdateError:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(O.a)(Object(O.a)({},e),{},{email:t.payload.email,isLoggedIn:!0,isFetching:!1,jwt:t.payload.jwt,isAdmin:t.payload.isAdmin,userId:t.payload.userId,loginError:null});case V:return ee;case J:return Object(O.a)(Object(O.a)({},e),{},{isFetching:!0,loginError:null});case W:return Object(O.a)(Object(O.a)({},e),{},{isFetching:!0,registerError:null});case Z:return Object(O.a)(Object(O.a)({},e),{},{isFetching:!1,registerError:null});case $:return Object(O.a)(Object(O.a)({},e),{},{isFetching:!1,loginError:t.payload.error});case Q:return Object(O.a)(Object(O.a)({},e),{},{isFetching:!1,registerError:t.payload.error});case H:return Object(O.a)(Object(O.a)({},e),{},{isFetching:!0,profileUpdateError:null});case X:return Object(O.a)(Object(O.a)({},e),{},{isFetching:!1,email:t.payload.email,profileUpdateError:null});case K:return Object(O.a)(Object(O.a)({},e),{},{isFetching:!1,profileUpdateError:!0});default:return e}},ne=function(e){return{type:G,payload:e}},re=function(e){return{type:$,payload:{error:e}}},ae=function(e){return{type:Q,payload:{error:e}}},ce=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:J}),t.prev=1,t.next=4,R(e);case 4:r=t.sent,n(r?ne({email:e.email,jwt:r.data.token,isAdmin:r.data.isAdmin,userId:r.data.userId}):re("Failed to login")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(re("Failed to login"));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},se=function(){return{type:V}},ie=ce,oe=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:W}),t.prev=1,t.next=4,_(e);case 4:t.sent?(n({type:Z}),n(ce(e))):n(ae("Failed to register")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(ae("Failed to register"));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},ue=function(e,t){return function(){var n=Object(d.a)(p.a.mark((function n(r){var a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:H}),n.prev=1,n.next=4,U(e,t);case 4:a=n.sent,r(a?{type:X,payload:{email:e.email}}:{type:K}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(ae("Failed to register"));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},le=Object(l.b)({user:te}),je=n(101),be=n(33),pe=n(308),de=n(310),Oe=n(71),he=n(4),me=function(){var e=Object(j.c)((function(e){return e.user.isLoggedIn&&null!==e.user.jwt})),t=Object(j.b)();return Object(r.useEffect)((function(){t(se())}),[t]),e?Object(he.jsx)(be.a,{to:"/travel-log-client/"}):Object(he.jsxs)("div",{className:"basic-form-container",children:[Object(he.jsx)("h1",{children:"Welcome back!"}),Object(he.jsxs)(pe.a,{name:"basic",layout:"vertical",onFinish:function(e){t(ie(e))},onFinishFailed:function(){return console.log("errr")},autoComplete:"off",children:[Object(he.jsx)(pe.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your username!"}],children:Object(he.jsx)(de.a,{})}),Object(he.jsx)(pe.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(he.jsx)(de.a.Password,{})}),Object(he.jsx)(pe.a.Item,{children:Object(he.jsx)(Oe.a,{type:"primary",htmlType:"submit",children:"Login"})})]})]})},fe=function(){var e=Object(j.c)((function(e){return e.user.isLoggedIn&&null!==e.user.jwt})),t=Object(j.b)();return Object(r.useEffect)((function(){t(se())}),[t]),e?Object(he.jsx)(be.a,{to:"/travel-log-client/"}):Object(he.jsxs)("div",{className:"basic-form-container",children:[Object(he.jsx)("h1",{children:"Register now!"}),Object(he.jsxs)(pe.a,{name:"basic",layout:"vertical",onFinish:function(e){t(oe(e))},onFinishFailed:function(){return alert("error in form")},autoComplete:"off",children:[Object(he.jsx)(pe.a.Item,{label:"Full name",name:"fullname",rules:[{required:!0,message:"Please input your full name!"}],children:Object(he.jsx)(de.a,{})}),Object(he.jsx)(pe.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your username!"}],children:Object(he.jsx)(de.a,{})}),Object(he.jsx)(pe.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(he.jsx)(de.a.Password,{autoComplete:"new-password"})}),Object(he.jsx)(pe.a.Item,{children:Object(he.jsx)(Oe.a,{type:"primary",htmlType:"submit",children:"Register"})})]})]})},xe=function(){return Object(he.jsx)("div",{children:"trip form"})},ge=n(26),ve=n(62),ye=n.n(ve),we=n(100),Ie=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.user.jwt})),n=Object(j.c)((function(e){return!0===e.user.isFetching})),a=Object(r.useState)({}),c=Object(ge.a)(a,2),s=c[0],i=c[1];function o(){return o=Object(d.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}if(Object(r.useEffect)((function(){!function(){o.apply(this,arguments)}()}),[]),!Object.keys(s).length)return Object(he.jsx)(he.Fragment,{});return Object(he.jsxs)(pe.a,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",onFinish:function(n){e(ue(n,t))},onFinishFailed:function(){return alert("error in form")},initialValues:s,children:[Object(he.jsx)(pe.a.Item,{label:"Full name",name:"fullname",rules:[{required:!0,message:"Enter your full name"}],children:Object(he.jsx)(de.a,{})}),Object(he.jsx)(pe.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Enter your email"}],children:Object(he.jsx)(de.a,{})}),Object(he.jsx)(pe.a.Item,{label:"Lang code",name:"langCode",children:Object(he.jsxs)(we.a,{children:[Object(he.jsx)(we.a.Option,{value:"en",children:"EN"}),Object(he.jsx)(we.a.Option,{value:"sl",children:"SL"})]})}),Object(he.jsx)(pe.a.Item,{label:"Birth date",name:"birthDate",children:Object(he.jsx)("span",{children:ye()(new Date(s.birthdate)).format("DD.MM.yyyy")})}),Object(he.jsx)(pe.a.Item,{label:"Member since",name:"createdAt",disabled:!0,children:Object(he.jsx)("span",{children:ye()(new Date(s.createdAt)).format("DD.MM.yyyy")})}),Object(he.jsx)(pe.a.Item,{label:"New password",name:"password",children:Object(he.jsx)(de.a.Password,{})}),Object(he.jsx)(pe.a.Item,{label:"Old password",name:"oldpassword",rules:[{required:!0,message:"Enter old password to update profile!"}],children:Object(he.jsx)(de.a.Password,{autoComplete:"new-password"})}),Object(he.jsx)(pe.a.Item,{label:" ",children:Object(he.jsx)(Oe.a,{type:"primary",htmlType:"submit",children:n?"Loading...":"Update profile"})})]})},Ee=n(311),ke=n(309),Ce=n(313),Se=n(314),Fe=n(315),Le=n(316),Ne=n(317),De=n(125),Ae=de.a.Search,Me=function(){var e=Object(j.c)((function(e){return e.user.jwt})),t=Object(j.c)((function(e){return e.user.email})),n=Object(j.c)((function(e){return e.user.userId})),a=Object(j.c)((function(e){return e.user.isAdmin})),c=Object(be.g)(),s=Object(De.useToasts)().addToast,i=Object(r.useState)([]),o=Object(ge.a)(i,2),u=o[0],l=o[1],b=Object(r.useState)([]),O=Object(ge.a)(b,2),h=O[0],m=O[1],f=Object(r.useState)(!0),x=Object(ge.a)(f,2),g=x[0],v=x[1],y=Object(r.useState)(""),w=Object(ge.a)(y,2),I=w[0],E=w[1],k=Object(r.useState)(!1),C=Object(ge.a)(k,2),F=C[0],L=C[1],N=Object(r.useState)(-1),D=Object(ge.a)(N,2),A=D[0],M=D[1];function T(){L(!1),M(-1)}function R(e){return{appearance:e,autoDismiss:!0,autoDismissTimeout:2500}}function P(){return _.apply(this,arguments)}function _(){return _=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,l(t),m(t);case 5:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function z(e,n){var r=u.filter((function(r){var a=r.tripName.toLowerCase().includes(e.toLowerCase()),c=n||r.userList.some((function(e){return e.email===t}));return a&&c}));m(r)}function U(){return U=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,n);case 2:(r=e.sent)&&r.data.status?(s("Succesfully deleted record!",R("success")),P()):s("Failed to deleted record!",R("error"));case 4:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}return Object(r.useEffect)((function(){P()}),[]),Object(he.jsxs)("div",{className:"w-100",children:[Object(he.jsxs)("div",{style:{marginBottom:10},children:[Object(he.jsx)("span",{children:"Toggle all trips:  "}),Object(he.jsx)(Se.a,{size:"small",checked:g,onChange:function(e){v(e),z(I,e)}})]}),Object(he.jsx)(Ae,{placeholder:"Filter trips by title",allowClear:!0,onSearch:function(e){E(e),z(e,g)},style:{width:"100%"}}),Object(he.jsx)(ke.b,{itemLayout:"horizontal",dataSource:h,renderItem:function(t,r){return Object(he.jsx)(ke.b.Item,{actions:[Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(Oe.a,{type:"primary",shape:"circle",onClick:function(){return function(e){M(e),L(!0)}(r)},icon:Object(he.jsx)(Fe.a,{}),size:"large"}),(a||n&&n===t.createdBy)&&Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(Oe.a,{type:"danger",shape:"circle",onClick:function(){return function(e,t){return U.apply(this,arguments)}(t.id,e)},icon:Object(he.jsx)(Le.a,{}),size:"large"}),Object(he.jsx)(Oe.a,{shape:"circle",onClick:function(){return function(e){c.push("/travel-log-client/edit/trip/".concat(e))}(r)},icon:Object(he.jsx)(Ne.a,{}),size:"large"})]})]})],children:Object(he.jsx)(ke.b.Item.Meta,{avatar:Object(he.jsx)(Ce.a,{src:"https://cdn-icons-png.flaticon.com/512/1452/1452378.png"}),title:t.tripName,description:"".concat(t.destination," - ").concat(ye()(t.tripDate,"YYYYMMDD").fromNow())})})}}),function(){if(-1===A)return Object(he.jsx)(he.Fragment,{});var e=h[A];return Object(he.jsxs)(Ee.a,{title:"Trip details",visible:F,onOk:T,onCancel:T,width:"70vw",children:[Object(he.jsxs)("p",{children:["Name: ",Object(he.jsx)("b",{children:e.tripName})]}),Object(he.jsxs)("p",{children:["Destination: ",Object(he.jsx)("b",{children:e.destination})]}),Object(he.jsxs)("p",{children:["Country: ",Object(he.jsx)("b",{children:e.countryName})]}),-1!==e.avgRating&&Object(he.jsxs)("p",{children:["Avg rating: ",Object(he.jsx)("b",{children:e.avgRating})]}),Object(he.jsxs)("p",{children:["Trip date: ",Object(he.jsx)("b",{children:ye()(e.tripDate).format("DD.MM.yyyy")})]}),Object(he.jsx)(ke.b,{itemLayout:"horizontal",dataSource:e.userList,renderItem:function(e){return Object(he.jsx)(ke.b.Item,{children:Object(he.jsx)(ke.b.Item.Meta,{avatar:Object(he.jsx)(Ce.a,{src:"https://icons.veryicon.com/png/o/miscellaneous/two-color-icon-library/user-286.png"}),title:e.fullName,description:e.email})})}})]})}()]})},Te=n(87),Re=de.a.Search,Pe=function(){var e=Object(r.useState)([]),t=Object(ge.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(ge.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(!1),l=Object(ge.a)(u,2),j=l[0],b=l[1],O=Object(r.useState)(-1),h=Object(ge.a)(O,2),m=h[0],f=h[1];function x(){b(!1),f(-1)}function g(){return g=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,a(t),o(t);case 5:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}return Object(r.useEffect)((function(){!function(){g.apply(this,arguments)}()}),[]),Object(he.jsxs)("div",{className:"w-100",children:[Object(he.jsx)(Re,{placeholder:"Filter members by name",allowClear:!0,onSearch:function(e){o(n.filter((function(t){return t.fullName.toLowerCase().includes(e.toLowerCase())})))},style:{width:"100%"}}),Object(he.jsx)(ke.b,{itemLayout:"horizontal",dataSource:i,renderItem:function(e,t){return Object(he.jsx)(ke.b.Item,{actions:[Object(he.jsx)(Te.a,{title:"View detail",children:Object(he.jsx)(Oe.a,{type:"primary",shape:"circle",onClick:function(){return function(e){f(e),b(!0)}(t)},icon:Object(he.jsx)(Fe.a,{}),size:"large"})})],children:Object(he.jsx)(ke.b.Item.Meta,{avatar:Object(he.jsx)(Ce.a,{src:"https://icons.veryicon.com/png/o/miscellaneous/two-color-icon-library/user-286.png"}),title:e.fullName,description:e.email})})}}),function(){if(-1==m)return Object(he.jsx)(he.Fragment,{});var e=i[m];return Object(he.jsxs)(Ee.a,{title:"Member details",visible:j,onOk:x,onCancel:x,width:"70vw",children:[Object(he.jsxs)("p",{children:["Full name: ",Object(he.jsx)("b",{children:e.fullName})]}),Object(he.jsxs)("p",{children:["Email: ",Object(he.jsx)("b",{children:e.email})]}),Object(he.jsxs)("p",{children:["Birthdate: ",Object(he.jsx)("b",{children:ye()(e.birthdate).format("DD.MM.yyyy")})]}),Object(he.jsxs)("p",{children:["Joined: ",Object(he.jsx)("b",{children:ye()(e.createdAt).format("DD.MM.yyyy")})]}),Object(he.jsx)(ke.b,{itemLayout:"horizontal",dataSource:e.trips,renderItem:function(e){return Object(he.jsx)(ke.b.Item,{children:Object(he.jsx)(ke.b.Item.Meta,{avatar:Object(he.jsx)(Ce.a,{src:"https://cdn-icons-png.flaticon.com/512/1452/1452378.png"}),title:e.tripName,description:"".concat(e.destination," - ").concat(ye()(e.tripDate,"YYYYMMDD").fromNow())})})}})]})}()]})},_e=function(){return Object(he.jsx)("div",{className:"paperplane",children:Object(he.jsxs)("div",{className:"plane",children:[Object(he.jsx)("div",{className:"wingRight"}),Object(he.jsx)("div",{className:"wingLeft"}),Object(he.jsx)("div",{className:"bottom"}),Object(he.jsx)("div",{className:"top"}),Object(he.jsx)("div",{className:"middle"})]})})},ze=n.p+"static/media/banner.facae160.jpg",Ue=n(305),Be=n(306),qe=function(){var e=Object(r.useState)([]),t=Object(ge.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(ge.a)(c,2),i=s[0],o=s[1];function u(){return(u=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,y();case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=o,e.next=8,g();case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){u.apply(this,arguments)}()}),[]),Object(he.jsx)(he.Fragment,{children:Object(he.jsxs)("div",{id:"landing",children:[Object(he.jsx)("img",{id:"banner-img",src:ze}),Object(he.jsx)(_e,{}),Object(he.jsx)("p",{children:"~ Pass on the beautiful memories you've made around the world ~"}),Object(he.jsxs)("div",{id:"landing-container",children:[Object(he.jsx)("div",{id:"landing-container-title",children:Object(he.jsx)("h1",{children:"Travel log"})}),Object(he.jsxs)(Ue.a,{children:[Object(he.jsxs)(Be.a,{span:12,children:[Object(he.jsx)("h1",{className:"blu-title",children:"Top members"}),Object(he.jsx)(ke.b,{itemLayout:"horizontal",dataSource:n,renderItem:function(e){return Object(he.jsx)(ke.b.Item,{children:Object(he.jsx)(ke.b.Item.Meta,{avatar:Object(he.jsx)(Ce.a,{src:"https://icons.veryicon.com/png/o/miscellaneous/two-color-icon-library/user-286.png"}),title:e.user.fullname,description:"".concat(e.user.email," - Trips: ").concat(e.count)})})}})]}),Object(he.jsxs)(Be.a,{span:12,children:[Object(he.jsx)("h1",{className:"blu-title",children:"Top locations"}),Object(he.jsx)(ke.b,{itemLayout:"horizontal",dataSource:i,renderItem:function(e){return Object(he.jsx)(ke.b.Item,{children:Object(he.jsx)(ke.b.Item.Meta,{avatar:Object(he.jsx)(Ce.a,{src:"https://cdn-icons-png.flaticon.com/512/561/561726.png"}),title:e.name,description:"".concat(e.country," - Visited: ").concat(e.count)})})}})]})]})]})]})})},Ye=n(35),Ge=n(312),Ve=n(307),Je=function(){return Object(he.jsx)("svg",{id:"waves",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:Object(he.jsx)("path",{fill:"#3c71b6",fillOpacity:"1",d:"M0,160L60,149.3C120,139,240,117,360,117.3C480,117,600,139,720,149.3C840,160,960,160,1080,138.7C1200,117,1320,75,1380,53.3L1440,32L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"})})},We=function(e){var t=e.isAuth,n=e.isAdmin,a=Object(be.g)(),c=Object(j.b)(),s=Object(r.useState)("/"),i=Object(ge.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)(!1),b=Object(ge.a)(l,2),h=b[0],m=b[1],f=Object(r.useState)([]),x=Object(ge.a)(f,2),g=x[0],v=x[1],y=Object(j.c)((function(e){return e.user.jwt}));function w(){m(!1)}function I(){return(I=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="logout"===e.t0?3:"get-suggestion"===e.t0?5:11;break;case 3:return c(se()),e.abrupt("return");case 5:return e.next=7,M(y);case 7:return n=e.sent,v(n),m(!0),e.abrupt("return");case 11:return u(t),a.push("/travel-log-client/".concat(t)),e.abrupt("return");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E={left:{"":"Home",trips:"Recent trips",members:"Members"}},k={left:{"create/trip":"Add trip","get-suggestion":"Get suggestion"},right:{profile:"Profile",logout:"Logout"}},C={right:{login:"Login",register:"Register"}},S={left:{dashboard:"Dashboard"}};return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(Ve.a.Header,{children:function(){var e,r=Object(O.a)(Object(O.a)(Object(O.a)({},n?S.left:[]),E.left),t?k.left:C.left),a=Object(O.a)(Object(O.a)(Object(O.a)({},n?S.right:[]),E.right),t?k.right:C.right);return Object(he.jsxs)(Ge.a,(e={mode:"horizontal",selectedKeys:o},Object(Ye.a)(e,"mode","horizontal"),Object(Ye.a)(e,"onClick",(function(e){return function(e){return I.apply(this,arguments)}(e.key)})),Object(Ye.a)(e,"children",[Object.keys(r).map((function(e){return Object(he.jsx)(Ge.a.Item,{children:r[e]},e)})),Object.keys(a).map((function(e,t){return 0===t?Object(he.jsx)(Ge.a.Item,{style:{marginLeft:"auto"},children:a[e]},e):Object(he.jsx)(Ge.a.Item,{children:a[e]},e)}))]),e))}()}),Object(he.jsx)(Je,{}),Object(he.jsx)(Ee.a,{title:"Destination suggestions",visible:h,onOk:w,onCancel:w,children:Object(he.jsx)(ke.b,{itemLayout:"horizontal",dataSource:g,renderItem:function(e){return Object(he.jsx)(ke.b.Item,{children:Object(he.jsx)(ke.b.Item.Meta,{avatar:Object(he.jsx)(Ce.a,{src:"https://cdn-icons-png.flaticon.com/512/1452/1452378.png"}),title:Object(he.jsx)("a",{target:"_blank",href:"http://images.google.com/images?q=".concat(e.name),children:e.name}),description:e.country})})}})})]})},He=n(105),Xe=(n(302),function(e){return{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:e.title}}}});function Ke(e){var t=e.members,n=Xe({title:"Most active members"}),r={labels:t.map((function(e){return e.user.fullname})),datasets:[{label:"Members by full name",data:t.map((function(e){return e.count})),backgroundColor:"#3f681c"}]};return Object(he.jsx)(He.a,{options:n,data:r})}function Ze(e){var t=e.destinations,n=Xe({title:"Most visited destinations"}),r={labels:t.map((function(e){return e.name})),datasets:[{label:"Destinations by name",data:t.map((function(e){return e.count})),backgroundColor:"#fb6542"}]};return Object(he.jsx)(He.a,{options:n,data:r})}function $e(e){var t=e.countries,n=Xe({title:"Most visited countries"}),r={labels:t.map((function(e){return e.countryName})),datasets:[{label:"Countries by name",data:t.map((function(e){return e.count})),backgroundColor:"#ffbb00"}]};return Object(he.jsx)(He.a,{options:n,data:r})}function Qe(e){var t=e.monthData,n={labels:t.map((function(e){return e.monthName})),datasets:[{label:"Trips per month",data:t.map((function(e){return e.count})),backgroundColor:"#375e97"}]};return Object(he.jsx)(He.b,{type:"line",data:n})}var et=function(){var e=Object(r.useState)([]),t=Object(ge.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(ge.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)([]),l=Object(ge.a)(u,2),j=l[0],b=l[1],O=Object(r.useState)([]),h=Object(ge.a)(O,2),m=h[0],f=h[1];function x(){return(x=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,y();case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=o,e.next=8,g();case 8:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=b,e.next=13,I();case 13:return e.t5=e.sent,(0,e.t4)(e.t5),e.t6=f,e.next=18,k();case 18:e.t7=e.sent,(0,e.t6)(e.t7);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]),Object(he.jsxs)("div",{style:{flex:1},children:[Object(he.jsxs)(Ue.a,{gutter:[16,24],children:[Object(he.jsx)(Be.a,{span:12,children:Object(he.jsx)(Ke,{members:n})}),Object(he.jsx)(Be.a,{span:12,children:Object(he.jsx)(Ze,{destinations:i})})]}),Object(he.jsxs)(Ue.a,{gutter:[16,24],children:[Object(he.jsx)(Be.a,{span:12,children:Object(he.jsx)($e,{countries:j})}),Object(he.jsx)(Be.a,{span:12,children:Object(he.jsx)(Qe,{monthData:m})})]})]})},tt=(n(303),n(32)),nt=["component"],rt=["component"];function at(){var e=Object(j.c)((function(e){return e.user.isLoggedIn&&null!==e.user.jwt})),t=Object(j.c)((function(e){return!0===e.user.isAdmin})),n=Object(be.h)(),r=function(t){var n=t.component,r=Object(je.a)(t,nt);return Object(he.jsx)(be.b,Object(O.a)(Object(O.a)({},r),{},{render:function(t){return!0===e?Object(he.jsx)(n,Object(O.a)({},t)):Object(he.jsx)(be.a,{to:"/travel-log-client/login"})}}))},a=function(n){var r=n.component,a=Object(je.a)(n,rt);return Object(he.jsx)(be.b,Object(O.a)(Object(O.a)({},a),{},{render:function(n){return e&&t?Object(he.jsx)(r,Object(O.a)({},n)):Object(he.jsx)(be.a,{to:"/travel-log-client/login"})}}))};return Object(he.jsx)(De.ToastProvider,{children:Object(he.jsxs)(Ve.a,{children:[Object(he.jsx)(We,{isAuth:e,isAdmin:t}),Object(he.jsxs)(be.d,{children:[Object(he.jsx)(be.b,{path:"/travel-log-client/",component:qe,exact:!0}),["/travel-log-client/login","/travel-log-client/register"].includes(n.pathname)&&Object(he.jsxs)("div",{id:"container-with-background",children:[Object(he.jsx)(be.b,{path:"/travel-log-client/login",component:me}),Object(he.jsx)(be.b,{path:"/travel-log-client/register",component:fe})]}),Object(he.jsxs)(Ve.a.Content,{children:[Object(he.jsx)(be.b,{path:"/travel-log-client/trips",component:Me}),Object(he.jsx)(be.b,{path:"/travel-log-client/members",component:Pe}),Object(he.jsx)(r,{path:"/travel-log-client/create/trip",component:xe}),Object(he.jsx)(r,{path:"/travel-log-client/edit/trip/:id",component:xe}),Object(he.jsx)(r,{path:"/travel-log-client/profile",component:Ie}),Object(he.jsx)(a,{path:"/travel-log-client/dashboard",component:et})]})]})]})})}tt.e.register(tt.d,tt.i,tt.b,tt.n,tt.o,tt.g);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,st=Object(l.d)(le,ct(Object(l.a)(s.a),o()())),it=document.getElementById("root");c.a.render(Object(he.jsx)(j.a,{store:st,children:Object(he.jsx)(u.a,{children:Object(he.jsx)(at,{})})}),it),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[304,1,2]]]);
//# sourceMappingURL=main.bddf1c3e.chunk.js.map